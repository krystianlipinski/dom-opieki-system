generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  firstName String?
  lastName  String?
  role      Role     @default(staff_care)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())

  tasksCompleted Patient[] @relation("CompletedTasks")
}

model Patient {
  id           Int      @id @default(autoincrement())
  firstName    String
  lastName     String
  carePriority Priority @default(medium)
  createdAt    DateTime @default(now())

  completedBy       User?    @relation("CompletedTasks", fields: [completedByUserId], references: [id])
  completedByUserId Int?
}

enum Role {
  admin
  staff_care
  staff_doctor
  family
}

enum Priority {
  high
  medium
  low
}